<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payment Successful – Subs Please</title>
  <meta name="description" content="Payment successful page for Subs Please. Displays your checkout ID." />
  <link rel="icon" href="logo.png" />
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif;
      color: #111827;
      background: #f9fafb;
      display: grid;
      place-items: center;
    }
    .card {
      width: min(720px, 92vw);
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      padding: clamp(20px, 4vw, 32px);
      box-shadow: 0 10px 24px rgba(16,24,40,0.08);
    }
    .title {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 0 0 8px 0;
      font-size: clamp(22px, 3vw, 28px);
      font-weight: 800;
      color: #0f172a;
    }
    .check {
      width: 28px; height: 28px;
      display: inline-grid; place-items: center;
      color: #16a34a;
      background: #dcfce7;
      border-radius: 999px;
      font-size: 18px;
    }
    .lead { margin: 0 0 16px 0; color: #475569; }
    .row { display: flex; gap: 10px; align-items: baseline; flex-wrap: wrap; }
    .label { color: #6b7280; font-weight: 600; }
    .code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      padding: 6px 10px;
      border-radius: 8px;
      color: #111827;
      word-break: break-all;
    }
    .warn { color: #b91c1c; background: #fee2e2; border-color: #fecaca; }
    .actions { margin-top: 18px; display: flex; gap: 10px; flex-wrap: wrap; }
    .btn { background: #111827; color: #fff; text-decoration: none; padding: 10px 14px; border-radius: 10px; font-weight: 600; }
    .btn:hover { background: #0b1220; }
  </style>
</head>
<body>
  <main class="card" aria-label="Payment Success">
    <h1 class="title">
      <span class="check" aria-hidden="true">✔</span>
      Payment successful
    </h1>
    <p class="lead">Thanks for your support. Your purchase was completed.</p>

    <div class="row" aria-live="polite" aria-atomic="true">
      <div class="label">Checkout ID:</div>
      <div id="checkoutId" class="code">Loading…</div>
    </div>

    <div id="missingId" class="code warn" style="display:none; margin-top:12px;">We couldn't detect a checkout ID in the URL.</div>

    <div class="actions">
      <a class="btn" href="index.html">Back to home</a>
    </div>
  </main>

  <script>
    (function() {
      function getCheckoutId() {
        var path = (window.location && window.location.pathname) || '';
        var lower = path.toLowerCase();
        var marker = '/paymentsuccess/';
        var pos = lower.indexOf(marker);
        if (pos !== -1) {
          var remainder = path.slice(pos + marker.length).replace(/\/+$/,'');
          if (remainder) return decodeURIComponent(remainder);
        }

        var hash = (window.location && window.location.hash) || '';
        if (hash && hash.length > 1) {
          var h = hash.replace(/^#\/?/, '');
          var part = h.split(/[?#]/)[0].split('/')[0];
          if (part) return decodeURIComponent(part);
        }

        var search = (window.location && window.location.search) || '';
        if (search) {
          var qs = new URLSearchParams(search);
          if (qs.get('id')) return qs.get('id');
          if (qs.get('checkout')) return qs.get('checkout');
        }
        return null;
      }

      var id = getCheckoutId();
      var el = document.getElementById('checkoutId');
      var warn = document.getElementById('missingId');
      if (id) {
        el.textContent = id;
      } else {
        el.textContent = '—';
        warn.style.display = 'block';
      }
    })();
  </script>
</body>
</html>
